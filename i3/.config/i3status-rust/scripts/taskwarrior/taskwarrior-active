#!/usr/bin/env janet
(import json)
(use sh)

(defn json-res [i]
  (json/encode {:icon "headphones" :text i :state "Info"}))


# TODO: handle multple ids
(defn display [id]
  (if-not (empty? id)
    (let [cmd (string id ".description")
          desc ($< task _get ,cmd)
          res (string/trim desc)]
      (prin (json-res res)))
    (print (json-res ""))))

(defn main [&]
  (-> ($< task +ACTIVE ids)
      (string/trim)
      (display)))

